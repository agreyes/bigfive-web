[![Build Status](https://travis-ci.org/Alheimsins/bigfive-web.svg?branch=master)](https://travis-ci.org/Alheimsins/bigfive-web)
[![js-standard-style](https://img.shields.io/badge/code%20style-standard-brightgreen.svg?style=flat)](https://github.com/feross/standard)

# bigfive-web

Iframe and Javascript library wrapper for five factor model of personality based on work from [Alheimsins](hhttps://github.com/Alheimsins/bigfive-web).

Tests and evaluation is gathered from [ipip.ori.org](http://ipip.ori.org).

See it live @ [bigfive-test.com](https://bigfive-test.com)

Written in [nodejs](https://nodejs.org) using the [next.js](https://github.com/zeit/next.js) and [micro](https://github.com/zeit/micro) framework

## Preview

![](https://media.giphy.com/media/k83RlkC1s3bhdBJ8Yb/giphy.gif)

## Installation

Download and install [nodejs](https://nodejs.org) and [git](https://git-scm.com/downloads)

```sh
git clone https://github.com/agreyes/bigfive-web
cd bigfive-web
npm install
vim config.js # Edit config
npm run dev
```
Open web-browser at http://localhost:3000

## Deploy using [Now](https://zeit.co/now)

```sh
$ wget https://raw.githubusercontent.com/agreyes/bigfive-web/master/production.env
$ vim production.env # Edit config
$ now -E production.env https://github.com/Alheimsins/bigfive-web
```

## Deploy using [Docker](https://www.docker.com/)

Install [Docker](https://www.docker.com/)

```sh
docker run -d --name bigfive-web alheimsins/bigfive-web
```

## Javascript Library

Add the following script to your page: {{deployment_location}}/big5Test.js

If running locally, use:

```<script src="http://localhost:3000/big5Test.js"></script>```

### Initializing the Javascript Library

To add the test to your site, add the following script to your page {{deployment_location}}/big5Test.js

If running locally, use:

```<script src="http://localhost:3000/big5Test.js"></script>```

To initialize the test, use (all parameters are optional):

```javascript
var testConfig: {
    container: "", // id of wrapping element, if no element in the document matches, the wrapper and iframe are appended to the end of the body tag
    styleSheetUrl: "", // stylesheet url to be loaded in iframe
    data: null, // test data used to resume progress, must match the format of data provided by progress event
    autoHeight: true, // when true [default], iframe scrolling is disabled and iframe height will be automatically adjusted to match content
    onProgress: function(lib){ /* onProgress callback */ },
    onResize: function(lib){ /* onResize callback */ },
    onLoad: function(lib){ /* onLoad callback */ },
    onComplete: function(lib){ /* onComplete callback */ }
}

big5Test.init(testConfig);
```

### Library Methods

Method | Description
------------ | -------------
big5Test.getData() | Gets the latest test data provided
big5Test.getResults() | Gets the latest test results (data.results)
big5Test.getContentHeight() | Gets the height of the iframe content in pixels
big5Test.getContentWidth() | Gets the width of the iframe content in pixels
big5Test.init(testConfig) | Initializes the test with the given configuration
big5Test.inProgress() | Returns a boolean value indicating if the test has loaded but the user hasn't completed the test
big5Test.isComplete() | Returns a boolean value indicating the the test has been completed and results are available
big5Test.setData(data) | Sets the test data and progress
big5Test.setResults(results) | Sets and displays the latest test results
big5Test.style(stylesheetUrl) | Loads the given stylesheet on the test iframe

### Library Events

All callbacks bellow receive a reference to the library as the first argument. 

Event | Description
------------ | -------------
onLoad | Fired when the test has finished loading and initialized
onResize | Fired when the contents of the iframe change size
onProgress | Fired when the user has made progress on the test
onComplete | Fired when the user completes the test

## Related

- [b5-johnson-120-ipip-neo-pi-r](https://github.com/Alheimsins/b5-johnson-120-ipip-neo-pi-r) - Module for returning Big Five [Johnson 120 IPIP-NEO-PI-R](http://ipip.ori.org/30FacetNEO-PI-RItems.htm) items
- [b5-result-text](https://github.com/Alheimsins/b5-result-text) - Text for big five results score generated by b5-calculate-score
- [bigfive-calculate-score](https://github.com/Alheimsins/bigfive-calculate-score) - Calculate score for big five tests

## License

[MIT](LICENSE)

## About

Created by [zrrzzt](https://github.com/zrrrzzt) and [maccyber](https://github.com/maccyber) with ‚ù§ for [Alheimsins](https://alheimsins.net)

<img src="https://image.ibb.co/dPH08G/logo_black.png" height="150px" width="150px" />
